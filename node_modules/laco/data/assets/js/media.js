Dropzone.autoDiscover = false;
var LacoMedia = function() {
    var self = {};
    self.selectors = ['.laco-upload-holder'];
    var lacoDropzone = $(self.selectors.join(',')).dropzone({
        previewTemplate: $('#laco-dz-preview-tpl').html(),
        thumbnailWidth: 300,
        thumbnailHeight: 300,
        parallelUploads: 20,
        autoQueue: true,
        //acceptedFiles: "image/*,video/*,application/*,text/*,application/octet-stream",
        paramName: "lacoFile",
        accept: function(file, done) {
            var thumbnail = $('.thumb', file.previewElement);
            var fileMimeType = file.type;
            var fileMimeTypes = fileMimeType.split('/');
            if(fileMimeTypes[0] != 'image') {
                var fps = file.name.split('.');
                var fileExt = fps.length > 1 ? file.name.split('.').pop() : '...';
                thumbnail.replaceWith(`<div class="thumb not-image thumb-file-${fileExt}"><span>${fileExt}</span></div>`)
            }
            done();
        },
        headers: {
            'x-csrf-token': $('meta[name="_csrf"]').attr('content')
        },
        url: '/file/post'
    });
    return lacoDropzone;
};
var lacoDropzone = new LacoMedia();