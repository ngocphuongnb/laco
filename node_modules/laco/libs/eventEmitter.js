"use strict";

const eventEmitter = new (require('events')).EventEmitter();
eventEmitter.setMaxListeners(0);

eventEmitter.all = (events, callback) => {
    let eventList = events.slice(0);
    events.forEach(event => {
        eventEmitter.on(event, () => {
            var index = eventList.indexOf(event);
            if (index === -1) return;
            eventList.splice(index, 1);
            if (eventList.length === 0) return callback();
        });
    });
};

eventEmitter.any = (events, callback) => {
    events.forEach(event => {
        eventEmitter.on(event, () => {
            if (events !== null) return callback();
            events = null;
        });
    });
};

module.exports = eventEmitter;