"use strict";

var _ = require('underscore');

module.exports = function(name, data) {
    //console.log(data);
    var fieldId = name.replace('[', '_');
    fieldId = fieldId.replace(']', '_');

    // console.log(typeof data.value);
    // data.value = _.uniq(data.value.split(',')).join(',');

    var c = '\
    <div class="card">\
        <div class="card-header clearfix">\
            <div class="nb-label">\
                ' + data.label + '\
                <a href="#" title="Add post" class="btn-floating btn-small waves-effect waves-light nb-posts-picker-add-posts" data-container=".nb-posts-picker-' + fieldId + '" data-inputname="' + name + '" style="width: 30px; height: 30px; line-height: 30px">\
                    <i class="zmdi zmdi-plus" style="line-height: 30px;font-size: 14px;"></i>\
                </a>\
                <a href="#" title="Add post" class="btn-floating btn-small red waves-effect waves-light nb-posts-picker-remove-all-posts" data-container=".nb-posts-picker-' + fieldId + '" data-inputname="' + name + '" style="width: 30px; height: 30px; line-height: 30px">\
                    <i class="zmdi zmdi-delete" style="line-height: 30px;font-size: 14px;"></i>\
                </a>\
            </div>\
        </div>\
        <div class="card-body">\
            <div style="height: 410px;overflow: auto">\
                <table class="table striped responsive-table">\
                    <thead>\
                        <tr>\
                            <th data-field="drag">' + lang('Drag') + '</th>\
                            <th data-field="id">' + lang('Id') + '</th>\
                            <th data-field="image">' + lang('Image') + '</th>\
                            <th data-field="name">' + lang('Name') + '</th>\
                            <th data-field="url">' + lang('Url') + '</th>\
                            <th data-field="taxonomy">' + lang('Taxonomy') + '</th>\
                            <th data-field="author">' + lang('Author') + '</th>\
                            <th data-field="add_date">' + lang('Date') + '</th>\
                            <th data-field="actions">' + lang('Actions') + '</th>\
                        </tr>\
                    </thead>\
                    <tbody class="nb-posts-picker-wrapper nb-posts-picker-' + fieldId + '" data-value="' + data.value + '" data-inputname="' + name + '">\
                        <tr id="nb-post-frame" class="nb-post-picker-frame" style="display: none">\
                            <td class="nbhl-drag"><i class="zmdi zmdi-arrows"></i></td>\
                            <td class="nbhl-id"><a href="#" title="' + lang('Edit post') + '" target="_blank">id</a></td>\
                            <td class="nbhl-img">\
                                <a href="#" title="' + lang('Edit post') + '" target="_blank"><img class="responsive-img" src="" /></a>\
                            </td>\
                            <td class="nbhl-name"><a href="#" title="' + lang('Edit post') + '" target="_blank">name</a></td>\
                            <td class="nbhl-url">url</td>\
                            <td class="nbhl-cat">category</td>\
                            <td class="nbhl-author">author</td>\
                            <td class="nbhl-date">date</td>\
                            <td class="nbhl-remove"><a href="#" class="nb-posts-picker-remove-post">' + lang('Remove') + '</a></td>\
                        </tr>\
                    </tbody>\
                </table>\
            </div>\
        </div>\
    </div>';

    return c;
};