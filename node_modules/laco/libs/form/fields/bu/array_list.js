"use strict";

var _ = require('underscore');
var path = require('path');
var helper = require(path.join(LIBS_DIR, 'helper'));

module.exports = function(name, data) {
    var fieldId = name.replace('[', '_');
    fieldId = fieldId.replace(']', '_');
    if(!_.isArray(data.value)) data.value = [data.value];
    var str = '\
    <div class="input-field nb-string-list col s12 m' + data.cols + '">\
        <div class="nb-array-list-header">\
            ' + data.label + '\
            <span class="nb-array-list-add" data-target="' + fieldId + '" data-field="' + name + '"><i class="zmdi zmdi-plus"></i></span>\
        </div>\
        <ul id="' + fieldId + '" class="nb-array-list-content">';
    _.map(data.value, function(l, i) {
        var j = i + 1;
        str += '\
            <li class="clearfix">\
                <span class="nb-remove-array-list-item"><i class="zmdi zmdi-close"></i></span>\
                <span>' + j + '</span>\
                <input type="text" name="' + name + '[]" value="' + l + '" />\
            </li>';
    });
    str += '</ul>\
    </div>';
    return str;
};