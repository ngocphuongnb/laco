"use strict";
const path = require('path');
const randomstring = require("randomstring");

global.lacoLib = moduleFile => {
    return require(path.join(LACO_ROOT, moduleFile));
}

const caller = () => {
    try {
        let err = new Error();
        let callerfile;
        let currentfile;

        let _prepareStackTrace = Error.prepareStackTrace;
        Error.prepareStackTrace =  (err, stack) => stack;

        err.stack.shift();
        currentfile = err.stack.shift();

        while (err.stack.length) {
            callerfile = err.stack.shift();
            if(currentfile !== callerfile) {
                Error.prepareStackTrace = _prepareStackTrace;
                return callerfile;
            }
        }
    } catch (err) {
    }
    return undefined;
}

exports.randomstring = randomstring;
exports.caller = caller;