'use strict';

const BaseExtension = lacoLib('libs/extension/base');
const adminRoute = require('./routes');
const adminController = require('./controllers');
const adminUI = require('./uis');

class LacoAdmin extends BaseExtension {
    constructor(laco) {
        super(laco);
        this.name = 'admin';
        this.laco.all(['ui.AdminBSB.loaded'], () => this.laco.emit('ext.admin.init'));
        let admin = new this.laco.SubApp(this.laco, 'admin');
        admin.ui.register(adminUI(this));
        admin.router.register(adminRoute(this));
        admin.controller.register(adminController(this));
        this.laco.subAppManager.register('/admin', admin);
    }
}

module.exports = LacoAdmin;