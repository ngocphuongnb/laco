"use strict";
const express = require('express');
const router = express.Router();

router.all('/:module?/:action?/:extra([a-zA-Z0-9\-\_\/]+)?', function(req, res) {
    if(typeof req.params.module != 'undefined')
        g.admin.module = req.params.mod_name;
    else
        g.admin.module = 'dashboard';

    if(typeof req.params.mod_action != 'undefined')
        g.admin.action = req.params.mod_action;
    else {
        g.admin.action = 'main';
    }
    g.session.userInfo = req.session.userInfo;
    var adminModule = require(ADMIN_MODULR_DIR + g.admin.module + '/' + g.admin.module + '.js')('admin***' + g.admin.module, req, res, app);
    adminModule[g.admin.action](req, res);
});

module.exports = router;